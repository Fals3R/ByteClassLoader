package ru.fals3r;

import ru.fals3r.classloader.ByteClassLoader;

import java.io.IOException;
import java.lang.reflect.InvocationTargetException;
import java.net.URL;

public class AkrienGuard {

    /**
     * Simple jar with just a single class <b>ru.fals3r.Test</b> with a single method - <b>print()V</b>
     */
    private static final byte[] TEST_JAR = { 80, 75, 3, 4, 10, 0, 0, 0, 0, 0, 24, 104, 59, 82, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 0, 0, 114, 117, 47, 80, 75, 3, 4, 10, 0, 0, 0, 0, 0, 24, 104, 59, 82, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 0, 0, 114, 117, 47, 102, 97, 108, 115, 51, 114, 47, 80, 75, 3, 4, 20, 0, 0, 0, 8, 0, -58, 101, 59, 82, 78, 63, -10, 81, 58, 1, 0, 0, -43, 1, 0, 0, 20, 0, 0, 0, 114, 117, 47, 102, 97, 108, 115, 51, 114, 47, 84, 101, 115, 116, 46, 99, 108, 97, 115, 115, 101, 80, -55, 74, 3, 65, 16, 125, -99, 109, 22, 99, 18, 19, -29, -66, 48, -73, 40, -24, 28, -12, 22, -15, 34, 120, 26, 84, 72, -56, -67, 103, 108, 99, -121, 89, -92, -89, 71, -16, -77, -12, -96, -32, -63, 15, -16, -93, -60, -22, 81, -126, -63, -122, -82, -22, -86, 122, -11, 94, 85, 127, 126, -67, 127, 0, 56, -59, -66, -123, 10, 67, 75, 21, -2, 29, -113, -13, 19, -27, -113, 69, -82, 45, -44, 24, 58, 51, -2, -56, -3, -104, -89, 83, -1, 58, -100, -119, 72, 51, 52, -50, 100, 42, -11, 57, 67, 117, 112, 48, 97, -88, 93, 100, -73, -62, 69, 21, 78, 19, 117, 52, 24, -38, -127, 76, -59, 85, -111, -124, 66, -115, 121, 24, 11, -122, 110, -112, 69, 60, -98, 112, 37, 77, -4, -101, -84, -23, 123, -103, -109, 64, -80, -88, 58, 100, -88, 63, 40, -103, 106, 7, 29, 116, 45, -84, 44, -52, 48, 122, -54, -75, 72, -102, -24, 97, -107, -12, -77, -126, -58, -23, 7, 101, 89, 102, -2, -115, 105, 27, 105, 37, 120, 50, -76, -79, -58, 96, -105, 25, -49, -13, 92, 108, 96, -53, -62, 38, 67, -17, 63, -104, -24, -74, -79, -61, 96, -107, -78, 113, 74, -108, -125, -32, -113, -92, -90, -12, 116, 104, 86, 117, 71, 89, -95, 34, 113, 41, -51, -4, -114, -103, -10, -40, -32, -32, -127, -47, -2, -26, 84, -24, 69, -97, 64, -42, -94, -56, 39, -49, -56, -41, 15, -33, 96, 63, -105, 101, -105, 108, -61, 36, -87, 97, -119, 108, -13, 7, 64, 126, -103, -68, -125, -42, -68, -7, -120, -48, -26, 56, 47, 104, 119, -5, -81, 88, -97, 19, -48, -83, -108, 52, 54, 1, -119, -60, 68, -44, -76, 91, -66, -10, -66, 1, 80, 75, 1, 2, 31, 0, 10, 0, 0, 0, 0, 0, 24, 104, 59, 82, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 3, 0, 36, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 0, 0, 0, 0, 114, 117, 47, 10, 0, 32, 0, 0, 0, 0, 0, 1, 0, 24, 0, -3, -56, 26, 74, -109, -12, -42, 1, -3, -56, 26, 74, -109, -12, -42, 1, 6, 44, -51, 70, -109, -12, -42, 1, 80, 75, 1, 2, 31, 0, 10, 0, 0, 0, 0, 0, 24, 104, 59, 82, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 10, 0, 36, 0, 0, 0, 0, 0, 0, 0, 16, 0, 0, 0, 33, 0, 0, 0, 114, 117, 47, 102, 97, 108, 115, 51, 114, 47, 10, 0, 32, 0, 0, 0, 0, 0, 1, 0, 24, 0, 46, 68, -113, 73, -109, -12, -42, 1, 46, 68, -113, 73, -109, -12, -42, 1, 46, 68, -113, 73, -109, -12, -42, 1, 80, 75, 1, 2, 63, 0, 20, 0, 0, 0, 8, 0, -58, 101, 59, 82, 78, 63, -10, 81, 58, 1, 0, 0, -43, 1, 0, 0, 20, 0, 36, 0, 0, 0, 0, 0, 0, 0, 32, 0, 0, 0, 73, 0, 0, 0, 114, 117, 47, 102, 97, 108, 115, 51, 114, 47, 84, 101, 115, 116, 46, 99, 108, 97, 115, 115, 10, 0, 32, 0, 0, 0, 0, 0, 1, 0, 24, 0, 46, 123, 7, 62, -111, -12, -42, 1, 46, 123, 7, 62, -111, -12, -42, 1, -110, -77, -29, 19, -111, -12, -42, 1, 80, 75, 5, 6, 0, 0, 0, 0, 3, 0, 3, 0, 23, 1, 0, 0, -75, 1, 0, 0, 0, 0 };

    public static void main(String[] args) throws IOException, ClassNotFoundException, NoSuchMethodException, InvocationTargetException, IllegalAccessException {
        ByteClassLoader loader = new ByteClassLoader(new URL[0], null, TEST_JAR);
        Class<?> clazz = loader.loadClass("ru.fals3r.Test");
        clazz.getDeclaredMethod("print").invoke(null);
    }
}
